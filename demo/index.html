<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Soundonika Sample Browser</title>
    <style>
        body { font-family: sans-serif; padding: 1rem; }
        select, button { margin: 0.25rem; padding: 0.5rem; }
        .sample-buttons { margin-top: 1rem; }
    </style>
</head>
<body>
    <h1>Soundonika Sample Browser</h1>
    <label for="categorySelect">Category:</label>
    <select id="categorySelect"></select>

    <label for="packSelect">Pack:</label>
    <select id="packSelect"></select>

    <div class="sample-buttons" id="sampleButtons"></div>

    <script src="../js/soundonika.js"></script>
    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const engine = new SoundonikaEngine();

        const categorySelect = document.getElementById('categorySelect');
        const packSelect = document.getElementById('packSelect');
        const sampleButtons = document.getElementById('sampleButtons');

        async function init() {
            await engine.loadSampleIndex();

            // Populate categories
            const categories = engine.getAvailableSampleCategories();
            categories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat;
                option.textContent = cat;
                categorySelect.appendChild(option);
            });

            // Trigger pack population
            populatePacks();
        }

        function populatePacks() {
            const category = categorySelect.value;
            packSelect.innerHTML = '';
            const packs = engine.getSamplePacksForCategory(category);
            packs.forEach(pack => {
                const option = document.createElement('option');
                option.value = pack;
                option.textContent = pack;
                packSelect.appendChild(option);
            });

            // Trigger samples
            populateSamples();
        }

        function populateSamples() {
            const category = categorySelect.value;
            const pack = packSelect.value;
            const samples = engine.getSamplesForPack(category, pack);
            sampleButtons.innerHTML = '';

            samples.forEach(sample => {
                const btn = document.createElement('button');
                btn.textContent = sample;
                btn.onclick = () => engine.previewSample(category, pack, sample);
                sampleButtons.appendChild(btn);
            });
        }

        categorySelect.onchange = populatePacks;
        packSelect.onchange = populateSamples;

        init();
    </script>
</body>
</html>
